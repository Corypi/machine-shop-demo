/*==========================================================
  Design Tokens / Global Constants
==========================================================*/
:root{
  /* ---------------- Colors ---------------- */
  --GlobalColorBackgroundDefaultHexValue:       #0b0d10;
  --GlobalColorForegroundDefaultHexValue:       #e9edf1;
  --GlobalColorMutedTextHexValue:               #9aa6b2;
  --GlobalColorCardSurfaceHexValue:             #12161b;   /* reserved for future use */
  --GlobalColorAccentPrimaryHexValue:           #48b0ff;

  /* ---------------- Layout ---------------- */
  --GlobalMaximumContentWidthPixels:            1100px;
  --GlobalGenericBorderRadiusPixels:            12px;
  --GlobalGenericElementGapPixels:              12px;

  /* ---------------- Drawer Behavior ---------------- */
  --DrawerCollapsedHeaderBarHeightRems:         2.75rem;   /* header height when collapsed */
  --DrawerExpandedFallbackMaxHeightPixels:      500px;     /* max height if JS is off */

  /* ---------------- Animation & Performance ---------------- */
  --GlobalAnimationDurationMilliseconds:        220ms;
  --DrawerContentIntrinsicSizePixels:           420px;     /* size hint for content-visibility */

  /* ---------------- Drawer Color System (HSL base + stepping) ---------------- */
  --DrawerTitleBarBaseHueDegrees:               210;   /* harmonizes with background */
  --DrawerTitleBarHueStepPerDrawerDegrees:      2;
  --DrawerTitleBarBaseSaturationPercent:        18%;
  --DrawerTitleBarSaturationStepPerDrawerPct:   0%;
  --DrawerTitleBarBaseLightnessPercent:         7%;
  --DrawerTitleBarLightnessStepPerDrawerPct:    3.5%;

  /* ---------------- Drawer Structural Constants ---------------- */
  --DrawerBottomCornerBorderRadiusPixels:       16px;      /* rounded bottom for bars/panels */
  --DrawerExpandedPanelExtraTailPaddingPixels:  16px;      /* extra padding below open content */
  --DrawerHeaderTopSeamBorderColorRgba:         rgba(255,255,255,0.06);

  --DrawerHeaderTitlePaddingVerticalRems:       0.875rem;
  --DrawerHeaderTitlePaddingHorizontalRems:     1.125rem;

  --DrawerContentPaddingHorizontalRems:         1rem;
  --DrawerContentPaddingBottomRems:             1.5rem;    /* 24px */
  --DrawerContentInternalGapRems:               0.75rem;

  --DrawerStackedDrawerGapPixels:               0;         /* no visible gap between stacked bars */

  /* ---------------- Video Overlay / Skip Button ---------------- */
  --VideoOverlaySkipButtonInsetFromEdgePixels:  30px;
  --VideoOverlaySkipButtonBackdropBlurPixels:   4px;

  /* ---------------- Trigger Line Debug Visual ---------------- */
  --ViewportAnchorTriggerLineThicknessPixels:   2px;
  --ViewportAnchorTriggerLineColorHexValue:     #ffd400;

  /* Keep this in sync with JS config ViewportAnchorFraction (0.35 = 35vh) */
  --ViewportAnchorTriggerLinePositionVh:        35vh;
}
/*==========================================================
  Base / Resets
==========================================================*/
* { box-sizing: border-box; }
html, body { height: 100%; }
html, body { overflow-x: hidden; }     /* prevent 100vw scrollbars */

body {
  margin: 0;
  color: var(--GlobalColorForegroundDefaultHexValue);
  background: var(--GlobalColorBackgroundDefaultHexValue);
  font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

/* =========================================
   Drawer Trigger Line (visual scroll marker)
   ========================================= */
.TriggerLine {
  position: fixed;
  top: var(--ViewportAnchorTriggerLinePositionVh);
  left: 0;
  right: 0;
  height: var(--ViewportAnchorTriggerLineThicknessPixels);
  background: var(--ViewportAnchorTriggerLineColorHexValue);
  opacity: 0.7;
  z-index: 9999;
  pointer-events: none;
}

/*==========================================================
  Header
==========================================================*/
.Header {
  background: #1a2027;
  color: #ffffff;
  padding: 1rem;
  text-align: center;
  border-bottom: 1px solid #0e141a;
}
.HeaderTitle {
  margin: 0;
  font-size: clamp(1.5rem, 3.2vw, 2.4rem);
}
.HeaderSubtitle {
  margin: 0.25rem 0 0;
  color: #cfd8e3;
}

/*==========================================================
  Container (centered content; full-bleed drawers escape)
==========================================================*/
.Container {
  max-width: var(--GlobalMaximumContentWidthPixels);
  margin: 2rem auto;
  padding: 0 1rem;
}
.SectionTitle {
  margin: 0 0 0.75rem 0;
  font-size: 1.25rem;
  color: var(--GlobalColorMutedTextHexValue);
}

/*==========================================================
  Drawers
==========================================================*/
.Drawer {
  width: 100vw;
  margin-left: 50%;
  transform: translateX(-50%);
  max-width: none;
  --_step: 0;
  contain: paint; /* perf */
}

/* Stack tightly â€” next bar becomes the hard divider line */
.Drawer + .Drawer { margin-top: var(--DrawerStackedDrawerGapPixels); }

/* Progressive lighten + hue shift by order */
.Container > [data-drawer]:nth-of-type(1) { --_step: 0; }
.Container > [data-drawer]:nth-of-type(2) { --_step: 1; }
.Container > [data-drawer]:nth-of-type(3) { --_step: 2; }
.Container > [data-drawer]:nth-of-type(4) { --_step: 3; }
.Container > [data-drawer]:nth-of-type(5) { --_step: 4; }

/* ---------- Title Bar ---------- */
.DrawerTitle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--DrawerContentInternalGapRems);
  padding: var(--DrawerHeaderTitlePaddingVerticalRems) var(--DrawerHeaderTitlePaddingHorizontalRems);
  margin: 0;
  min-height: var(--DrawerCollapsedHeaderBarHeightRems);
  cursor: pointer;
  user-select: none;
  color: #fff;

  --_h:  calc(var(--DrawerTitleBarBaseHueDegrees)   + var(--DrawerTitleBarHueStepPerDrawerDegrees) * var(--_step));
  --_s:  calc(var(--DrawerTitleBarBaseSaturationPercent)   + var(--DrawerTitleBarSaturationStepPerDrawerPct) * var(--_step));
  --_l0: calc(var(--DrawerTitleBarBaseLightnessPercent) + var(--DrawerTitleBarLightnessStepPerDrawerPct) * var(--_step));
  --_l1: calc(var(--DrawerTitleBarBaseLightnessPercent) + var(--DrawerTitleBarLightnessStepPerDrawerPct) * var(--_step) + 2%);

  background: linear-gradient(
    180deg,
    hsl(var(--_h), var(--_s), var(--_l0)) 0%,
    hsl(var(--_h), var(--_s), var(--_l1)) 100%
  );

  border-radius: 0 0 var(--DrawerBottomCornerBorderRadiusPixels) var(--DrawerBottomCornerBorderRadiusPixels);
  border-top: 1px solid var(--DrawerHeaderTopSeamBorderColorRgba);
  outline: none;
}
.DrawerTitle:focus-visible {
  outline: 2px solid var(--GlobalColorAccentPrimaryHexValue);
  outline-offset: 4px;
}

/* caret */
.Caret {
  width: 1.25rem;
  height: 1.25rem;
  transition: transform var(--GlobalAnimationDurationMilliseconds) ease;
}
.Drawer--Open .Caret { transform: rotate(180deg); }

/* ---------- Drawer Content ---------- */
.DrawerContent {
  height: 0;
  padding: 0;
  overflow: clip;
  display: grid;
  gap: var(--DrawerContentInternalGapRems);
  color: #cdd6df;

  content-visibility: auto;
  contain-intrinsic-size: var(--DrawerContentIntrinsicSizePixels);
}

.Drawer--Open > .DrawerContent {
  padding: 0 var(--DrawerContentPaddingHorizontalRems) var(--DrawerContentPaddingBottomRems) var(--DrawerContentPaddingHorizontalRems);
}

.Drawer--Open > .DrawerContent.DrawerContent--Fill,
.Drawer--Open > .DrawerContent.DrawerContent--Flush {
  padding: 0;
}

/* ---------- Drawer open panel background + rounded base ---------- */
.Drawer--Open {
  --_h:  calc(var(--DrawerTitleBarBaseHueDegrees)   + var(--DrawerTitleBarHueStepPerDrawerDegrees) * var(--_step));
  --_s:  calc(var(--DrawerTitleBarBaseSaturationPercent)   + var(--DrawerTitleBarSaturationStepPerDrawerPct) * var(--_step));
  --_l0: calc(var(--DrawerTitleBarBaseLightnessPercent) + var(--DrawerTitleBarLightnessStepPerDrawerPct) * var(--_step));
  --_l1: calc(var(--DrawerTitleBarBaseLightnessPercent) + var(--DrawerTitleBarLightnessStepPerDrawerPct) * var(--_step) + 2%);

  background: linear-gradient(
    180deg,
    hsl(var(--_h), var(--_s), var(--_l0)) 0%,
    hsl(var(--_h), var(--_s), var(--_l1)) 100%
  );

  border-radius: 0 0 var(--DrawerBottomCornerBorderRadiusPixels) var(--DrawerBottomCornerBorderRadiusPixels);
  overflow: hidden;
  padding-bottom: var(--DrawerExpandedPanelExtraTailPaddingPixels);
}

.Drawer--Open > .DrawerTitle {
  background: transparent;
  border-top: 1px solid var(--DrawerHeaderTopSeamBorderColorRgba);
  border-radius: 0;
}

.Drawer:not(.Drawer--Open) > .DrawerTitle {
  --_h:  calc(var(--DrawerTitleBarBaseHueDegrees)   + var(--DrawerTitleBarHueStepPerDrawerDegrees) * var(--_step));
  --_s:  calc(var(--DrawerTitleBarBaseSaturationPercent)   + var(--DrawerTitleBarSaturationStepPerDrawerPct) * var(--_step));
  --_l0: calc(var(--DrawerTitleBarBaseLightnessPercent) + var(--DrawerTitleBarLightnessStepPerDrawerPct) * var(--_step));
  --_l1: calc(var(--DrawerTitleBarBaseLightnessPercent) + var(--DrawerTitleBarLightnessStepPerDrawerPct) * var(--_step) + 2%);

  background: linear-gradient(
    180deg,
    hsl(var(--_h), var(--_s), var(--_l0)) 0%,
    hsl(var(--_h), var(--_s), var(--_l1)) 100%
  );

  border-radius: 0 0 var(--DrawerBottomCornerBorderRadiusPixels) var(--DrawerBottomCornerBorderRadiusPixels);
}

/*==========================================================
  Fixed-height Video
==========================================================*/
.Drawer--FixedHero  { height: 100svh; height: 100vh; }
.Drawer--FixedShort { height: 70svh;  height: 70vh; }

.Drawer--FixedHero  > .DrawerContent,
.Drawer--FixedShort > .DrawerContent {
  height: calc(100% - var(--DrawerCollapsedHeaderBarHeightRems));
  min-height: 0;
}

.VideoFixed {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  background: #000;
}

.VideoFixed::-webkit-media-controls { display: none !important; }
.VideoFixed::-moz-media-controls    { display: none !important; }
.VideoFixed::-ms-media-controls     { display: none !important; }

/*==========================================================
  Overlay Skip button
==========================================================*/
.DrawerContent--Fill { position: relative; }

.SkipButton--Overlay {
  position: absolute;
  z-index: 5;
  right: calc(var(--VideoOverlaySkipButtonInsetFromEdgePixels) + env(safe-area-inset-right));
  bottom: calc(var(--VideoOverlaySkipButtonInsetFromEdgePixels) + env(safe-area-inset-bottom));
  margin: 0;
  backdrop-filter: blur(var(--VideoOverlaySkipButtonBackdropBlurPixels));
}
.SkipButton--Overlay:hover  { background: rgba(255,255,255,0.26); }
.SkipButton--Overlay:active { background: rgba(255,255,255,0.38); transform: scale(0.97); }

/*==========================================================
  Skip Button base
==========================================================*/
.SkipRow {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 0.5rem;
}
.SkipButton {
  position: relative;
  display: inline-block;
  margin-top: 0.5rem;
  margin-left: auto;
  padding: 0.5rem 0.9rem;
  font-weight: 700;
  border: 2px solid #ffffff;
  border-radius: 6px;
  color: #ffffff;
  background: rgba(0,0,0,0.55);
  cursor: pointer;
  transition: background 0.2s ease, transform 0.1s ease, box-shadow 0.1s ease;
}
.SkipButton:hover { background: rgba(255,255,255,0.2); }
.SkipButton:active {
  background: rgba(255,255,255,0.35);
  transform: scale(0.96);
}
.SkipButton:focus { outline: none; }
.SkipButton:focus-visible {
  outline: 2px solid var(--GlobalColorAccentPrimaryHexValue);
  outline-offset: 3px;
  box-shadow: 0 0 0 3px rgba(72,176,255,0.25);
}

/*==========================================================
  Footer
==========================================================*/
.Footer {
  padding: 2rem 1rem;
  text-align: center;
  color: var(--GlobalColorMutedTextHexValue);
  border-top: 1px solid #11161b;
}

/*==========================================================
  Reduced Motion
==========================================================*/
@media (prefers-reduced-motion: reduce) {
  .Caret { transition: none !important; }
  .DrawerContent,
  .SkipButton { transition: background 0.2s ease !important; }
  .SkipButton:active { transform: none !important; }
}
